# 错误码规范（6 位）

## 概述
本规范用于统一项目中错误码的定义与管理，保证可读性、可追溯性和向后兼容性。所有错误码为 6 位十进制数字，前两位表示错误分类，后四位为该分类下的顺序编号。

## 分类说明
- `10xxxx` \- 系统 / 基础设施错误（例如数据库、缓存、网络等）
- `20xxxx` \- 业务错误（例如校验失败、权限、业务规则等）
- `30xxxx` \- 第三方服务错误（例如飞书、第三方 API）

## 编号与定义要点
- 错误码为 6 位整数字符串（例如：100000、200001）。
- 同一分类内按顺序递增分配后四位编号；已发布编号不可变更、不可重用，仅允许追加新编号。
- 每个错误码应有：常量名、数值、中文描述，可选的 HTTP 状态码（按业务需求决定）。
- 在代码中使用具名常量，注释中写明含义；保持枚举顺序只追加，不修改已存在常量位置。

## 错误码清单（全量）
> 以下清单直接来源于 `errs` 包的源代码。

### 系统 / 基础设施（10xxxx）
- `InternalServerErrorCode = 100000` - 服务内部错误 - HTTP 500
- `SerializationErrorCode = 100001` - 序列化错误 - HTTP 500
- `DeserializationErrorCode = 100002` - 反序列化错误 - HTTP 500
- `QueueOperationErrorCode = 100003` - 队列任务操作错误 - HTTP 500

### 业务（20xxxx）
- `RecordNotFoundCode = 200000` - 记录不存在 - HTTP 404
- `AddPendingLikeTaskCode = 200001` - 添加待处理点赞任务失败 - HTTP 500

### 第三方服务（30xxxx）
- `FeishuRequestErrorCode = 300000` - 飞书请求接口失败 - HTTP 500
- `FeishuResponseErrorCode = 300001` - 飞书服务返回错误 - HTTP 500
- `ReadResponseErrorCode = 300002` - 读取响应流错误 - HTTP 500

> 说明：上表为当前源码中定义的完整错误码（截止到当前提交）。若源码发生变更，请以源码为准并同步更新本文件。

## 使用与处理
- 在返回给客户端的错误响应中，优先返回错误码与简短描述，避免泄露内部实现细节。
- 同一业务异常应复用既有错误码，不随场景重复新增相同语义的错误码。
- 日志中记录完整错误上下文（带错误码、堆栈或请求 ID），以便排查。
- 错误码只在 service 层及以上使用，避免在底层库或工具包中定义业务错误码。

## 变更与版本管理
- 已发布错误码的含义或数值不得更改；如需替代，新增错误码并在文档中注明替代关系。

