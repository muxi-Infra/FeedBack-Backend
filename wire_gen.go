// Code generated by Wire. DO NOT EDIT.

//go:generate go run -mod=mod github.com/google/wire/cmd/wire
//go:build !wireinject
// +build !wireinject

package main

import (
	"github.com/muxi-Infra/FeedBack-Backend/config"
	"github.com/muxi-Infra/FeedBack-Backend/controller"
	"github.com/muxi-Infra/FeedBack-Backend/ioc"
	"github.com/muxi-Infra/FeedBack-Backend/middleware"
	"github.com/muxi-Infra/FeedBack-Backend/pkg/feishu"
	"github.com/muxi-Infra/FeedBack-Backend/pkg/ijwt"
	"github.com/muxi-Infra/FeedBack-Backend/pkg/logger"
	"github.com/muxi-Infra/FeedBack-Backend/repository/dao"
	"github.com/muxi-Infra/FeedBack-Backend/service"
	"github.com/muxi-Infra/FeedBack-Backend/web"
)

// Injectors from wire.go:

func InitApp() (*App, error) {
	middlewareConfig := config.NewMiddlewareConfig()
	corsMiddleware := middleware.NewCorsMiddleware(middlewareConfig)
	jwtConfig := config.NewJWTConfig()
	jwt := ijwt.NewJWT(jwtConfig)
	authMiddleware := middleware.NewAuthMiddleware(jwt)
	v := config.NewBasicAuthConfig()
	basicAuthMiddleware := middleware.NewBasicAuthMiddleware(v)
	logConfig := config.NewLogConfig()
	zapLogger := ioc.InitLogger(logConfig)
	loggerLogger := logger.NewZapLogger(zapLogger)
	loggerMiddleware := middleware.NewLoggerMiddleware(loggerLogger)
	registry := ioc.InitPrometheus()
	prometheusMiddleware := middleware.NewPrometheusMiddleware(registry)
	limiterConfig := config.NewLimiterConfig()
	redisConfig := config.NewRedisConfig()
	client := ioc.InitRedis(redisConfig)
	limitMiddleware := middleware.NewLimitMiddleware(limiterConfig, client)
	like := dao.NewLike(client)
	clientConfig := config.NewClientConfig()
	larkClient := ioc.InitClient(clientConfig)
	feishuClient := feishu.NewClient(larkClient)
	appTable := config.NewAppTable()
	batchNoticeConfig := config.NewBatchNoticeConfig()
	sheetService := service.NewSheetService(like, feishuClient, loggerLogger, appTable, batchNoticeConfig)
	sheet := controller.NewSheet(loggerLogger, sheetService, appTable)
	oauth := controller.NewOauth(jwt, appTable)
	likeService := service.NewLikeService(like, feishuClient, loggerLogger)
	controllerLike := controller.NewLike(likeService, appTable, loggerLogger)
	engine := web.NewGinEngine(corsMiddleware, authMiddleware, basicAuthMiddleware, loggerMiddleware, prometheusMiddleware, limitMiddleware, sheet, oauth, controllerLike)
	app := &App{
		r: engine,
	}
	return app, nil
}
